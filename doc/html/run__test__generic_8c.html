<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>CDI SDK: src/test/run_test_generic.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="image_left.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CDI SDK
   </div>
   <div id="projectbrief">SDK for transporting chunks of data reliably and with low latency using a polled mode network driver.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_120ed4da3e3217b1e7fc0b4f48568e79.html">test</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">run_test_generic.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains the <a class="el" href="run__test__generic_8c.html#ab65595fedb9c0473502a6dfbaefe8b89">RunTestGeneric()</a> function which is the main test execution function that uses the SDK's API to initialize the adapter, create connections, and send and receive payloads.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="run__test_8h_source.html">run_test.h</a>&quot;</code><br />
<code>#include &lt;inttypes.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="configuration_8h_source.html">configuration.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cdi__core__api_8h_source.html">cdi_core_api.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cdi__logger__api_8h_source.html">cdi_logger_api.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cdi__os__api_8h_source.html">cdi_os_api.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cdi__raw__api_8h_source.html">cdi_raw_api.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cdi__test_8h_source.html">cdi_test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="test__args_8h_source.html">test_args.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="test__console_8h_source.html">test_console.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="test__dynamic_8h_source.html">test_dynamic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="test__receiver_8h_source.html">test_receiver.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="test__transmitter_8h_source.html">test_transmitter.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPoolInitArgs.html">PoolInitArgs</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure used to pass arguments into <a class="el" href="run__test__generic_8c.html#a81a89ea707b2a7d0449472a37ef72aa0">InitPoolSgl()</a>.  <a href="structPoolInitArgs.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7660fbc65ed2c0179209b5290eb78da1"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="run__test__generic_8c.html#a7660fbc65ed2c0179209b5290eb78da1">CreateCommonResources</a> (<a class="el" href="structTestConnectionInfo.html">TestConnectionInfo</a> *connection_info_ptr)</td></tr>
<tr class="separator:a7660fbc65ed2c0179209b5290eb78da1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a250711b62650b4b08281acf4932d9528"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="run__test__generic_8c.html#a250711b62650b4b08281acf4932d9528">DestroyCommonResources</a> (<a class="el" href="structTestConnectionInfo.html">TestConnectionInfo</a> *connection_info_ptr)</td></tr>
<tr class="separator:a250711b62650b4b08281acf4932d9528"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2902cc3ea047856d5421e1c7f5a0864e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="run__test__generic_8c.html#a2902cc3ea047856d5421e1c7f5a0864e">WaitForTestToComplete</a> (<a class="el" href="structTestConnectionInfo.html">TestConnectionInfo</a> *connection_info_array, int num_connections)</td></tr>
<tr class="separator:a2902cc3ea047856d5421e1c7f5a0864e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81a89ea707b2a7d0449472a37ef72aa0"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="run__test__generic_8c.html#a81a89ea707b2a7d0449472a37ef72aa0">InitPoolSgl</a> (const void *context_ptr, void *item_ptr)</td></tr>
<tr class="separator:a81a89ea707b2a7d0449472a37ef72aa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcf1e9c52efe1269ce0f6fb20f41a9f6"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="run__test__generic_8c.html#afcf1e9c52efe1269ce0f6fb20f41a9f6">DestroyPoolSgl</a> (const void *context_ptr, void *item_ptr)</td></tr>
<tr class="separator:afcf1e9c52efe1269ce0f6fb20f41a9f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26599d634a6095dbaa8dd420c6e7b863"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="run__test__generic_8c.html#a26599d634a6095dbaa8dd420c6e7b863">CreateTxBufferPools</a> (<a class="el" href="structTestConnectionInfo.html">TestConnectionInfo</a> *connection_info_ptr, uint8_t **tx_buffer_ptr)</td></tr>
<tr class="separator:a26599d634a6095dbaa8dd420c6e7b863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab65595fedb9c0473502a6dfbaefe8b89"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="run__test__generic_8c.html#ab65595fedb9c0473502a6dfbaefe8b89">RunTestGeneric</a> (<a class="el" href="structTestSettings.html">TestSettings</a> *test_settings_ptr, int max_test_settings_entries, int num_connections)</td></tr>
<tr class="separator:ab65595fedb9c0473502a6dfbaefe8b89"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains the <a class="el" href="run__test__generic_8c.html#ab65595fedb9c0473502a6dfbaefe8b89">RunTestGeneric()</a> function which is the main test execution function that uses the SDK's API to initialize the adapter, create connections, and send and receive payloads. </p>
<p>This function takes in the <a class="el" href="structTestSettings.html" title="A structure that holds all the test settings as set from the command line. ">TestSettings</a> array, and for each TestSetting instance, we create a <a class="el" href="structTestConnectionInfo.html" title="A structure for storing all info related to a specific connection, including test settings...">TestConnectionInfo</a> instance which contains a pointer to the <a class="el" href="structTestSettings.html" title="A structure that holds all the test settings as set from the command line. ">TestSettings</a> instance associated with that connection.</p>
<p>Then we register the SDK adapter, launch all Rx connections, and then launch up all Tx connections. Once all connection threads have been launched, we wait until all of the threads complete and then check for any failures.</p>
<p>See <a class="el" href="cdi_test.html#cdi_test_all">CDI Test Application Architecture Top Level</a> for diagrams and detailed description of this test function. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a7660fbc65ed2c0179209b5290eb78da1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7660fbc65ed2c0179209b5290eb78da1">&#9670;&nbsp;</a></span>CreateCommonResources()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool CreateCommonResources </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTestConnectionInfo.html">TestConnectionInfo</a> *&#160;</td>
          <td class="paramname"><em>connection_info_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create resources that are common to both Tx and Rx connections.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connection_info_ptr</td><td>Pointer to test connection structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool Returns true if successfully created, otherwise false is returned. </dd></dl>

</div>
</div>
<a id="a26599d634a6095dbaa8dd420c6e7b863"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26599d634a6095dbaa8dd420c6e7b863">&#9670;&nbsp;</a></span>CreateTxBufferPools()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool CreateTxBufferPools </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTestConnectionInfo.html">TestConnectionInfo</a> *&#160;</td>
          <td class="paramname"><em>connection_info_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t **&#160;</td>
          <td class="paramname"><em>tx_buffer_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates all of the pools for tracking the connection's transmit buffers. Each stream in the connection has its own pool. The buffer passed through connection_info_ptr is assumed to have been sized correctly to account for all streams of all connections before the first time this function is called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connection_info_ptr</td><td>pointer to the structure containing all of the specifics of the connection for which to create the transmit buffer SGL pools. </td></tr>
    <tr><td class="paramname">tx_buffer_ptr</td><td>pointer to the pointer which tracks the assignment of each stream's buffers.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the pool creations succeeded, false if not. </dd></dl>

</div>
</div>
<a id="a250711b62650b4b08281acf4932d9528"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a250711b62650b4b08281acf4932d9528">&#9670;&nbsp;</a></span>DestroyCommonResources()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void DestroyCommonResources </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTestConnectionInfo.html">TestConnectionInfo</a> *&#160;</td>
          <td class="paramname"><em>connection_info_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Destroy resources that are common to both Tx and Rx connections.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connection_info_ptr</td><td>Pointer to test connection structure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afcf1e9c52efe1269ce0f6fb20f41a9f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcf1e9c52efe1269ce0f6fb20f41a9f6">&#9670;&nbsp;</a></span>DestroyPoolSgl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool DestroyPoolSgl </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>context_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>item_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pool operator function that gets called once for each item prior to the destruction of the transmit buffer SGL pool. This function must free any resources that were allocated in <a class="el" href="run__test__generic_8c.html#a81a89ea707b2a7d0449472a37ef72aa0">InitPoolSgl()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context_ptr</td><td>pointer to the structure containing all of the values passed into CdiPoolForEach() for a given connection's transmit buffer pool. </td></tr>
    <tr><td class="paramname">item_ptr</td><td>the address of the particular <a class="el" href="structCdiSgList.html" title="This structure defines a scatter-gather list (SGL) which is used to represent an array of data compri...">CdiSgList</a> need of cleanup.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true always. </dd></dl>

</div>
</div>
<a id="a81a89ea707b2a7d0449472a37ef72aa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81a89ea707b2a7d0449472a37ef72aa0">&#9670;&nbsp;</a></span>InitPoolSgl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool InitPoolSgl </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>context_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>item_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pool operator function that gets called once for each item during the creation of the transmit buffer SGL pool.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context_ptr</td><td>pointer to the structure containing all of the values passed into <a class="el" href="cdi__pool__api_8h.html#a0902fadb875f589af4a646234eeb73d9">CdiPoolCreateAndInitItems()</a> for a given connection's transmit buffer pool. </td></tr>
    <tr><td class="paramname">item_ptr</td><td>the address of the particular <a class="el" href="structCdiSgList.html" title="This structure defines a scatter-gather list (SGL) which is used to represent an array of data compri...">CdiSgList</a> being added to the pool in need of initialization.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the SGL item was initialized or false if a problem was encountered while attempting initialization. </dd></dl>

</div>
</div>
<a id="ab65595fedb9c0473502a6dfbaefe8b89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab65595fedb9c0473502a6dfbaefe8b89">&#9670;&nbsp;</a></span>RunTestGeneric()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RunTestGeneric </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTestSettings.html">TestSettings</a> *&#160;</td>
          <td class="paramname"><em>test_settings_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_test_settings_entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_connections</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Runs a test using the test parameters provided by the user.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">test_settings_ptr</td><td>Pointer to an array of user-supplied test settings for all connections. </td></tr>
    <tr><td class="paramname">max_test_settings_entries</td><td>The maximum number of test settings structures that the test_settings array can hold. </td></tr>
    <tr><td class="paramname">num_connections</td><td>The number of connections to create.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if all tests pass; false any tests fail </dd></dl>

</div>
</div>
<a id="a2902cc3ea047856d5421e1c7f5a0864e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2902cc3ea047856d5421e1c7f5a0864e">&#9670;&nbsp;</a></span>WaitForTestToComplete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void WaitForTestToComplete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTestConnectionInfo.html">TestConnectionInfo</a> *&#160;</td>
          <td class="paramname"><em>connection_info_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_connections</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Wait for test to complete and provides stats update on the console while tests are running.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connection_info_array</td><td>Pointer to array of all the test connection structures. </td></tr>
    <tr><td class="paramname">num_connections</td><td>Number of connections. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
	<div>Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.</div>
</small></address>
</body>
</html>
